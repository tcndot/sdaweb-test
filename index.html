<head>
  ...
  <!-- load header.js from root (defer so it doesn't block) -->
  <script src="header.js" defer></script>

  <!-- your other styles & inline scripts here... -->
</head>
<body>
  <!-- loader targets for header/footer -->
  <div id="headerdiv" aria-hidden="true"></div>

  <!-- rest of your page ... -->

  <div id="footerdiv" aria-hidden="true"></div>

  <script>
    const GITHUB_RAW_BASE = 'https://raw.githubusercontent.com/tcndot/sdaweb-test/main';

    // loadHTMLWithFallback (your existing version) — unchanged except we call initHeader()
    async function loadHTMLWithFallback(targetId, relPath) {
      const target = document.getElementById(targetId);
      if (!target) return;
      const rawFallback = `${GITHUB_RAW_BASE}/${relPath}`;

      // relative fetch
      try {
        const res = await fetch(relPath, {cache:'no-store'});
        if (!res.ok) throw new Error(`Relative fetch returned ${res.status}`);
        const text = await res.text();
        target.innerHTML = text;
        target.setAttribute('aria-hidden','false');

        // If we just loaded the header, call initHeader() (if available)
        if (targetId === 'headerdiv' && typeof window.initHeader === 'function') {
          try { window.initHeader(); } catch (e) { console.warn('initHeader failed', e); }
        }
        return;
      } catch (err) {
        logDebug(`Relative fetch failed for ${relPath}: ${err.message}. Trying raw GitHub fallback...`);
      }

      // raw fallback
      try {
        const res2 = await fetch(rawFallback, {cache:'no-store'});
        if (!res2.ok) throw new Error(`Raw fetch returned ${res2.status}`);
        const text2 = await res2.text();
        target.innerHTML = text2;
        target.setAttribute('aria-hidden','false');
        logDebug(`Loaded ${relPath} from raw GitHub fallback.`);

        if (targetId === 'headerdiv' && typeof window.initHeader === 'function') {
          try { window.initHeader(); } catch (e) { console.warn('initHeader failed', e); }
        }
        return;
      } catch (err2) {
        logDebug(`Raw fallback failed for ${relPath}: ${err2.message}. Header/footer not loaded.`);
        // minimal fallback (same as you had)
        if (targetId === 'headerdiv') {
          target.innerHTML = `<div style="padding:12px;background:#fff;border-bottom:1px solid #eee"><a href="/" style="text-decoration:none;color:var(--accent);font-weight:700">SDA Infra & Promoters</a></div>`;
          target.setAttribute('aria-hidden','false');
        }
        if (targetId === 'footerdiv') {
          target.innerHTML = `<footer style="padding:12px;text-align:center;color:#666;border-top:1px solid #eee">© ${new Date().getFullYear()} SDA Infra & Promoters</footer>`;
          target.setAttribute('aria-hidden','false');
        }
      }
    }

    (async function initHeaderFooter() {
      await loadHTMLWithFallback('headerdiv', 'header.html');
      await loadHTMLWithFallback('footerdiv', 'footer.html');
    })();
  </script>
</body>
</html>
